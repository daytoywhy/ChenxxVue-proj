import{_ as $,d as J,r as B,i as O,t as K,a as i,o as g,c as L,b as A,e,w as n,u as a,bF as M,bI as b,j,F as H,I as k,bJ as G,bM as Q,k as p,bL as h}from"./index.136adf48.js";import{u as W}from"./userInfo.1710e46e.js";import{m as F,a as X}from"./message.4b3718a2.js";import Y from"./AddOrEdit.0a21bc40.js";import Z from"./RoleDrawer.8a7c805e.js";const ee={id:"role-container"},te=p("\u6DFB\u52A0"),ue=p("\u6279\u91CF\u5220\u9664"),ae=p("\u641C\u7D22"),ne=p(" \u6570\u636E\u5173\u8054\u7C7B\u89D2\u8272 "),le=p(" \u975E\u6570\u636E\u5173\u8054\u7C7B\u89D2\u8272 "),oe=J({__name:"Role",setup(ie){const _=B(),o=O({queryForm:{roleName:"",pageNum:1,pageSize:5},loading:!1,total:0,tableData:[],selectIds:[]}),m=async()=>{o.loading=!0;const{data:{list:t,total:l}}=await W.getRoleList(o.queryForm);o.tableData=t,o.total=l,o.loading=!1};m();const C=t=>{o.selectIds=[];const l=t.records;for(const{id:s}of l)o.selectIds.push(s)},N=t=>{t.type=="size"&&(o.queryForm.pageNum=1),m()},D=()=>{o.queryForm.pageNum=1,m()},v=t=>{t!=null&&t.id?h.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u9879\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F("\u6A21\u62DF\u5220\u9664\u6210\u529F")}).catch(()=>{}):o.selectIds.length>0?h.confirm("\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u5DF2\u9009\u9879\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F("\u6A21\u62DF\u5220\u9664\u6210\u529F")}).catch(()=>{}):X("\u672A\u9009\u4E2D\u4EFB\u4F55\u884C")},y=t=>{t!=null&&t.id?_.value.init(t):_.value.init()},R=t=>{const l=t.status==0?"\u505C\u7528":"\u542F\u7528";h.confirm(`\u60A8\u786E\u5B9A\u8981${l}${t.roleName}\u89D2\u8272\u5417?`,"\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F("\u6A21\u62DF\u64CD\u4F5C\u6210\u529F")}).catch(()=>{})},x=B(),w=t=>{x.value.init(t)},{queryForm:r,tableData:z,loading:V,total:T}=K(o);return(t,l)=>{const s=i("el-button"),f=i("el-form-item"),I=i("el-input"),S=i("el-form"),c=i("vxe-column"),E=i("el-tag"),U=i("el-switch"),q=i("vxe-table"),P=i("vxe-pager");return g(),L("div",ee,[A("div",null,[e(S,{class:"action",inline:!0},{default:n(()=>[e(f,null,{default:n(()=>[e(s,{icon:a(M),plain:"",onClick:y,type:"primary"},{default:n(()=>[te]),_:1},8,["icon"]),e(s,{icon:a(b),plain:"",onClick:v,type:"danger"},{default:n(()=>[ue]),_:1},8,["icon"])]),_:1}),A("div",null,[e(f,null,{default:n(()=>[e(I,{modelValue:a(r).roleName,"onUpdate:modelValue":l[0]||(l[0]=u=>a(r).roleName=u),clearable:"",onKeyup:j(D,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue","onKeyup"])]),_:1}),e(f,null,{default:n(()=>[e(s,{icon:a(H),onClick:D,type:"primary"},{default:n(()=>[ae]),_:1},8,["icon"])]),_:1})])]),_:1})]),e(q,{border:"","show-footer":"",align:"center",loading:a(V),ref:"xTable","row-config":{isHover:!0},data:a(z),onCheckboxChange:C,onCheckboxAll:C},{default:n(()=>[e(c,{type:"checkbox",width:"60"}),e(c,{title:"NO",width:"60",field:"id"}),e(c,{title:"\u89D2\u8272\u540D\u79F0",width:"140",field:"roleName"}),e(c,{title:"\u89D2\u8272\u7C7B\u578B",width:"140",field:"type"},{default:n(({row:u})=>[u.type?(g(),k(E,{key:0,type:"success"},{default:n(()=>[ne]),_:1})):(g(),k(E,{key:1},{default:n(()=>[le]),_:1}))]),_:1}),e(c,{title:"\u89D2\u8272\u63CF\u8FF0",width:"250","show-overflow":"",field:"desc"}),e(c,{title:"\u72B6\u6001",field:"role","min-width":"60"},{default:n(({row:u})=>[e(U,{modelValue:u.status,"onUpdate:modelValue":d=>u.status=d,"active-value":1,"inactive-value":0,onChange:d=>R(u)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{title:"\u4FEE\u6539\u65F6\u95F4",width:"180",field:"datetime"}),e(c,{title:"\u64CD\u4F5C",fixed:"right","min-width":"200"},{default:n(({row:u})=>[e(s,{icon:a(G),onClick:d=>y(u),plain:"",size:"small",type:"primary"},null,8,["icon","onClick"]),e(s,{icon:a(b),onClick:d=>v(u),plain:"",size:"small",type:"danger"},null,8,["icon","onClick"]),e(s,{icon:a(Q),onClick:d=>w(u),plain:"",size:"small",type:"warning"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["loading","data"]),e(P,{style:{height:"80px"},perfect:"",align:"center",size:"small",layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"],"current-page":a(r).pageNum,"onUpdate:current-page":l[1]||(l[1]=u=>a(r).pageNum=u),"page-size":a(r).pageSize,"onUpdate:page-size":l[2]||(l[2]=u=>a(r).pageSize=u),total:a(T),onPageChange:N,"page-sizes":[5,10,20,50,100,{label:"\u5927\u91CF\u6570\u636E",value:1e3},{label:"\u5168\u91CF\u6570\u636E",value:-1}]},null,8,["current-page","page-size","total"]),e(Y,{ref_key:"AddOrEditRef",ref:_,onRefresh:t.getUserInfo},null,8,["onRefresh"]),e(Z,{ref_key:"RoleDrawerRef",ref:x},null,512)])}}});var _e=$(oe,[["__scopeId","data-v-b414596e"],["__file","/Users/chenxiangxiong/Desktop/\u9879\u76EE\u6C47\u603B/\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF/ChenxxVue-proj/src/views/system/role/Role.vue"]]);export{_e as default};
