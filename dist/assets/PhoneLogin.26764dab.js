import{_ as A,d as N,h as D,i as R,r as S,t as j,a as s,o as K,c as P,e,w as o,u as n,j as g,k as c,l as U,b as z}from"./index.136adf48.js";import{u as L}from"./user.b18fb181.js";import"./message.4b3718a2.js";import"./storage.6edf785c.js";const q=c("\u81EA\u52A8\u767B\u5F55"),I=z("a",{href:"javascript:;"}," \u5FD8\u8BB0\u5BC6\u7801",-1),T=c("\u767B\u5F55"),$=N({__name:"PhoneLogin",setup(G){const B=D(),{setLogin:C}=L(),u=R({formRef:null,loading:!1,form:{phoneNum:"",verifyCode:""},rules:{phoneNum:[{required:!0,trigger:"blur",validator:(r,t,l)=>{t&&new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/).test(t)?l():l(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"))}}],verifyCode:[{required:!0,trigger:"blur",validator:(r,t,l)=>{t||l(new Error("\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A")),l()}}]},time:60,smsSendBtn:!1}),w=()=>{u.formRef.validateField("phoneNum",r=>{if(r){console.log(111),u.smsSendBtn=!0;const t=window.setInterval(()=>{u.time--<=0&&(u.time=60,u.smsSendBtn=!1,window.clearInterval(t))},1e3)}})},m=async()=>{u.formRef.validate(async r=>{if(r)try{u.loading=!0,await C(u.form),B.push("/")}finally{u.loading=!1}})},p=S(!1),{form:a,formRef:v,rules:V,smsSendBtn:_,time:b,loading:F}=j(u);return(r,t)=>{const l=s("el-input"),d=s("el-form-item"),f=s("el-col"),h=s("el-button"),y=s("el-row"),x=s("el-checkbox"),E=s("route-link"),k=s("el-form");return K(),P("div",null,[e(k,{model:n(a),ref_key:"formRef",ref:v,rules:n(V),"status-icon":"",style:{width:"350px"}},{default:o(()=>[e(d,{prop:"phoneNum"},{default:o(()=>[e(l,{modelValue:n(a).phoneNum,"onUpdate:modelValue":t[0]||(t[0]=i=>n(a).phoneNum=i),size:"large",placeholder:"\u624B\u673A\u53F7",clearable:"",onKeyup:g(m,["enter"]),"prefix-icon":"iphone"},null,8,["modelValue","onKeyup"])]),_:1}),e(d,{prop:"verifyCode"},{default:o(()=>[e(y,{style:{width:"100%"},justify:"space-between"},{default:o(()=>[e(f,{span:15},{default:o(()=>[e(l,{modelValue:n(a).verifyCode,"onUpdate:modelValue":t[1]||(t[1]=i=>n(a).verifyCode=i),size:"large",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onKeyup:g(m,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(f,{span:8},{default:o(()=>[e(h,{size:"large",onClick:w,disabled:n(_),style:{width:"100%"}},{default:o(()=>[c(U(n(_)?n(b)+"s\u540E\u53EF\u91CD\u65B0\u53D1\u9001":"\u83B7\u53D6\u9A8C\u8BC1\u7801"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(y,{style:{width:"100%"},justify:"space-between"},{default:o(()=>[e(f,{span:12},{default:o(()=>[e(x,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=i=>p.value=i)},{default:o(()=>[q]),_:1},8,["modelValue"])]),_:1}),e(f,{span:4},{default:o(()=>[e(E,{to:{name:"login"}},{default:o(()=>[I]),_:1})]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(h,{style:{width:"100%"},type:"primary",size:"large",loading:n(F),onClick:m},{default:o(()=>[T]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])}}});var X=A($,[["__file","/Users/chenxiangxiong/Desktop/\u9879\u76EE\u6C47\u603B/\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF/ChenxxVue-proj/src/views/login/components/PhoneLogin.vue"]]);export{X as default};
