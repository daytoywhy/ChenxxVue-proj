import{s as a,m as g,n as u}from"./index.136adf48.js";import{m as l,a as m}from"./message.4b3718a2.js";import{h,a as E}from"./storage.6edf785c.js";var o={getCode:()=>a({url:"login/kaptcha",method:"get"}),signInSuccess:e=>a({url:"login/signIn",method:"post",data:e}),logout:()=>a({url:"login/signOut",method:"get"})};const d=g("user",{state:()=>({username:"daytoywhy",token:u.get("token"),avatar:""}),getters:{},actions:{setCookies(e){this.token=e,u.set("token",e)},setUsername(e){this.username=e},setAvatar(e){this.avatar=e},async setLogin(e){try{const t=await o.signInSuccess(e),{avatar:r,username:n,token:i}=t.data;this.setAvatar(r),this.setUsername(n),this.setCookies(i);const s=new Date().getHours(),c=s<8?"\u65E9\u4E0A\u597D\uFF5E":s<=11?"\u4E0A\u5348\u597D\uFF5E":s<=13?"\u4E2D\u5348\u597D\uFF5E":s<=18?"\u4E0B\u5348\u597D\uFF5E":"\u665A\u4E0A\u597D\uFF5E";l(`${c},\u6B22\u8FCE\u56DE\u5BB6`)}catch{const t="\u63A5\u53E3\u767B\u5F55\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5...";throw m(t),t}},async setLogout(){await o.logout(),h.clearAll(),E.clearAll(),u.remove("token"),location.reload()}}});export{o as l,d as u};
