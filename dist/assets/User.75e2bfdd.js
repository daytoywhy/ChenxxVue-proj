import{_ as S,d as K,r as J,i as O,t as j,a as i,o as y,c as E,b as A,e,w as o,u as t,j as B,F as H,bF as $,bI as k,bN as G,G as M,H as Q,I as W,bJ as X,k as m,bL as V}from"./index.136adf48.js";import{u as N}from"./userInfo.1710e46e.js";import{m as U,a as Y}from"./message.4b3718a2.js";import Z from"./AddOrEdit.5aaaa5ed.js";const ee={id:"user-container"},te={class:"query-content"},ue=m("\u641C\u7D22"),le=m("\u91CD\u7F6E"),ae={class:"action"},oe=m("\u6DFB\u52A0"),ne=m("\u6279\u91CF\u5220\u9664"),se=m("\u5BFC\u51FA"),ie=K({__name:"User",setup(re){const h=J(),l=O({queryForm:{username:"",account:"",role:"",pageNum:1,pageSize:5},loading:!1,total:0,tableData:[],roleList:[],selectIds:[]});(async()=>{const{data:{list:u}}=await N.getRoleList();console.log(u,"data"),l.roleList=u})();const _=async()=>{l.loading=!0;const{data:{list:u,total:n}}=await N.getUserList(l.queryForm);l.tableData=u,l.total=n,l.loading=!1};_();const b=u=>{l.selectIds=[];const n=u.records;for(const{id:g}of n)l.selectIds.push(g)},w=u=>{u.type=="size"&&(l.queryForm.pageNum=1),_()},f=()=>{l.queryForm.pageNum=1,_()},v=u=>{u!=null&&u.id?V.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u9879\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{U("\u6A21\u62DF\u5220\u9664\u6210\u529F")}).catch(()=>{}):l.selectIds.length>0?V.confirm("\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u5DF2\u9009\u9879\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{U("\u6A21\u62DF\u5220\u9664\u6210\u529F")}).catch(()=>{}):Y("\u672A\u9009\u4E2D\u4EFB\u4F55\u884C")},D=u=>{u!=null&&u.id?h.value.init(u):h.value.init()},z=()=>{l.queryForm.username="",l.queryForm.account="",l.queryForm.role="",f()},{queryForm:s,tableData:I,loading:L,roleList:x,total:q,formRef:ce}=j(l);return(u,n)=>{const g=i("el-input"),F=i("el-form-item"),p=i("el-option"),C=i("el-select"),d=i("el-button"),R=i("el-form"),r=i("vxe-column"),P=i("vxe-table"),T=i("vxe-pager");return y(),E("div",ee,[A("div",te,[e(R,{"label-width":"auto",inline:!0},{default:o(()=>[e(F,{label:"\u7528\u6237\u540D"},{default:o(()=>[e(g,{modelValue:t(s).username,"onUpdate:modelValue":n[0]||(n[0]=a=>t(s).username=a),clearable:"",onKeyup:B(f,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue","onKeyup"])]),_:1}),e(F,{label:"\u8D26\u53F7"},{default:o(()=>[e(g,{modelValue:t(s).account,"onUpdate:modelValue":n[1]||(n[1]=a=>t(s).account=a),clearable:"",onKeyup:B(f,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue","onKeyup"])]),_:1}),e(F,{label:"\u7F51\u7AD9\u89D2\u8272"},{default:o(()=>[e(C,{modelValue:t(s).role,"onUpdate:modelValue":n[2]||(n[2]=a=>t(s).role=a),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7F51\u7AD9\u89D2\u8272"},{default:o(()=>[e(p,{label:"\u7BA1\u7406\u5458",value:"1"}),e(p,{label:"\u89D2\u8272\u7BA1\u7406\u5458",value:"2"}),e(p,{label:"\u7528\u6237\u7BA1\u7406\u5458",value:"3"}),e(p,{label:"VIP",value:"4"})]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:o(()=>[e(d,{type:"primary",onClick:f,icon:t(H)},{default:o(()=>[ue]),_:1},8,["icon"]),e(d,{onClick:z},{default:o(()=>[le]),_:1})]),_:1})]),_:1})]),A("div",ae,[e(d,{icon:t($),plain:"",onClick:D,type:"primary"},{default:o(()=>[oe]),_:1},8,["icon"]),e(d,{icon:t(k),plain:"",onClick:v,type:"danger"},{default:o(()=>[ne]),_:1},8,["icon"]),e(d,{icon:t(G),plain:"",type:"info"},{default:o(()=>[se]),_:1},8,["icon"])]),e(P,{border:"","show-footer":"",align:"center",loading:t(L),ref:"xTable","row-config":{isHover:!0},data:t(I),onCheckboxChange:b,onCheckboxAll:b},{default:o(()=>[e(r,{type:"checkbox",width:"60"}),e(r,{title:"NO",width:"60",field:"id"}),e(r,{title:"\u7528\u6237\u540D",width:"100",field:"username"}),e(r,{title:"\u8D26\u53F7",width:"120",field:"account"}),e(r,{title:"\u4FE1\u606F",width:"200","show-overflow":"",field:"info"}),e(r,{title:"\u4FEE\u6539\u65F6\u95F4",width:"180",field:"datetime"}),e(r,{title:"\u89D2\u8272",field:"role","min-width":"180"},{default:o(({row:a})=>[e(C,{multiple:"","collapse-tags":"",modelValue:a.roleIds,"onUpdate:modelValue":c=>a.roleIds=c},{default:o(()=>[(y(!0),E(M,null,Q(t(x),c=>(y(),W(p,{key:c.id,label:c.roleName,value:c.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{title:"\u64CD\u4F5C",fixed:"right","min-width":"110"},{default:o(({row:a})=>[e(d,{icon:t(X),onClick:c=>D(a),plain:"",size:"small",type:"primary"},null,8,["icon","onClick"]),e(d,{icon:t(k),onClick:c=>v(a),plain:"",size:"small",type:"danger"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["loading","data"]),e(T,{style:{height:"80px"},perfect:"",align:"center",size:"small",layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"],"current-page":t(s).pageNum,"onUpdate:current-page":n[3]||(n[3]=a=>t(s).pageNum=a),"page-size":t(s).pageSize,"onUpdate:page-size":n[4]||(n[4]=a=>t(s).pageSize=a),total:t(q),onPageChange:w,"page-sizes":[5,10,20,50,100,{label:"\u5927\u91CF\u6570\u636E",value:1e3},{label:"\u5168\u91CF\u6570\u636E",value:-1}]},null,8,["current-page","page-size","total"]),e(Z,{ref_key:"AddOrEditRef",ref:h,onRefresh:_,roleList:t(x)},null,8,["roleList"])])}}});var ge=S(ie,[["__scopeId","data-v-347ddf2e"],["__file","/Users/chenxiangxiong/Desktop/\u9879\u76EE\u6C47\u603B/\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF/ChenxxVue-proj/src/views/system/user/User.vue"]]);export{ge as default};
